(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["media"],{"47b2":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-field",{attrs:{horizontal:"",label:e.$t("referenceLabel")}},[i("b-input",{attrs:{name:"reference",id:"reference",required:e.isRequired,icon:"info",placeholder:"For your reference - this text is not displayed to client","validation-message":"Please enter a valid reference - only dssfdsfd is allowed",pattern:"[A-Za-z0-9\\s.,?()]*"},model:{value:e.value.reference,callback:function(t){e.$set(e.value,"reference",t)},expression:"value.reference"}})],1)},s=[],l={props:{isRequired:Boolean,value:{type:Object,required:!0}},watch:{value:function(){this.$emit("input",this.value)}}},d=l,o=i("2877"),n=Object(o["a"])(d,a,s,!1,null,null,null);t["a"]=n.exports},"89b1":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"medication"},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-10 is-offset-1"},[i("div",{staticClass:"box"},[i("div",[i("h1",[e._v(" Media "),i("a",{staticClass:"button is-primary is-medium is-pulled-right",on:{click:function(t){return e.showAddModal()}}},[e._m(0),i("span",[e._v("Add New Media")])])])]),e.media.length?i("table",{staticClass:"table is-hoverable is-fullwidth is-striped"},[e._m(1),i("tbody",e._l(e.media,(function(t,a){return i("tr",{key:t.id},[i("td",[e._v(e._s(t.reference)+" ")]),i("td",[i("img",{attrs:{src:t.image_thumb}})]),i("td",[e._v(e._s(t.uploaded_by)+" ")]),i("td",[i("div",{staticClass:"buttons"},[i("b-button",{attrs:{type:"is-success","icon-left":"edit",title:"Edit"},on:{click:function(t){return e.showEditModal(a)}}}),i("b-button",{attrs:{type:"is-danger","icon-left":"trash",title:"Delete"},on:{click:function(t){return e.showDeleteModal(a)}}})],1)])])})),0)]):e._e()])]),e._v(" "),i("b-modal",{attrs:{scroll:"keep","can-cancel":!1},model:{value:e.isModalVisible,callback:function(t){e.isModalVisible=t},expression:"isModalVisible"}},[i("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[i("header",{staticClass:"modal-card-head"},[e.isAddModal?i("p",{staticClass:"modal-card-title"},[e._v("Upload New Media")]):e._e(),e.isEditModal?i("p",{staticClass:"modal-card-title"},[e._v("Edit Media")]):e._e(),e.isDeleteModal?i("p",{staticClass:"modal-card-title"},[e._v("Delete Media")]):e._e(),i("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e.closeModal()}}})]),e.isDeleteModal?i("section",{staticClass:"modal-card-body"},[i("p",[e._v("Are you sure you want to delete this media?")])]):e._e(),e.isAddModal||e.isEditModal?i("section",{staticClass:"modal-card-body"},[e.errors.length>0?i("div",{staticClass:"message is-danger"},[i("div",{staticClass:"message-body"},[i("ul",e._l(e.errors,(function(t){return i("li",{key:t.id},[e._v(e._s(t))])})),0)])]):e._e(),i("field-reference",{model:{value:e.my_media,callback:function(t){e.my_media=t},expression:"my_media"}}),i("field-upload",{attrs:{"is-required":""},model:{value:e.my_media,callback:function(t){e.my_media=t},expression:"my_media"}})],1):e._e(),i("footer",{staticClass:"modal-card-foot"},[e.isAddModal?i("button",{staticClass:"button is-success",on:{click:e.addMedia}},[e._v("Add Media")]):e._e(),e.isEditModal?i("button",{staticClass:"button is-success",on:{click:e.updateMedia}},[e._v("Save Changes")]):e._e(),e.isDeleteModal?i("button",{staticClass:"button is-danger",on:{click:e.deleteMedia}},[e._v("Delete Media")]):e._e(),i("button",{staticClass:"button",on:{click:function(t){return e.closeModal()}}},[e._v("Cancel")])])])])],1)])},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon is-medium"},[i("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",[e._v("Reference")]),i("th",[e._v("Thumbnail")]),i("th",[e._v("Uploaded by")]),i("th",[e._v("Actions")])])])}],l=i("47b2"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-field",{attrs:{horizontal:"",label:e.$t("fileLabel")}},[i("b-field",{staticClass:"file"},[i("b-upload",{staticClass:"file-label",attrs:{name:"file_upload",id:"file_upload",expanded:"",required:e.isRequired},model:{value:e.value.file_upload,callback:function(t){e.$set(e.value,"file_upload",t)},expression:"value.file_upload"}},[i("a",{staticClass:"button is-primary is-fullwidth"},[i("b-icon",{staticClass:"file-icon",attrs:{icon:"upload"}}),i("span",[e._v(" "+e._s(e.value.file_upload?e.value.file_upload.name:"Click to upload")+" ")])],1)])],1)],1)},o=[],n={props:{isRequired:Boolean,value:{type:Object,required:!0}},watch:{value:function(){this.$emit("input",this.value)}}},c=n,r=i("2877"),u=Object(r["a"])(c,d,o,!1,null,null,null),m=u.exports,f={components:{FieldReference:l["a"],FieldUpload:m},data:function(){return{media:[],my_media:{},errors:[],isModalVisible:!1,isAddModal:!1,isEditModal:!1,isDeleteModal:!1}},mounted:function(){this.getMedia()},methods:{closeModal:function(){this.my_media.id=null,this.my_media.reference="",this.my_media.uploaded_by="",this.my_media.file_upload=null,this.isModalVisible=!1,this.isAddModal=!1,this.isEditModal=!1,this.isDeleteModal=!1},showAddModal:function(){this.isAddModal=!0,this.isModalVisible=!0},showEditModal:function(e){this.my_media.id=this.media[e].id,this.my_media.reference=this.media[e].reference,this.my_media.uploaded_by=this.media[e].uploaded_by,this.isEditModal=!0,this.isModalVisible=!0},showDeleteModal:function(e){this.my_media.id=this.media[e].id,this.isDeleteModal=!0,this.isModalVisible=!0},getMedia:function(){var e=this;this.$http.get("uploads").then((function(t){e.media=t.data}))},addMedia:function(){var e=this,t=new FormData;t.append("reference",this.my_media.reference),t.append("file_upload",this.my_media.file_upload),this.$http.post("uploads",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t.data),e.closeModal(),e.getMedia()})).catch((function(e){console.log(e)}))},updateMedia:function(){var e=this,t=this.my_media;this.$http.put("uploads/"+t.id,t).then((function(t){console.log(t.data),e.closeModal(),e.getMedia()})).catch((function(e){console.log(e)}))},deleteMedia:function(){var e=this,t=this.my_media.id;this.$http.delete("uploads/"+t).then((function(t){console.log(t.data),e.closeModal(),e.getMedia()})).catch((function(e){console.log(e)}))}}},h=f,p=Object(r["a"])(h,a,s,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=media.164e731e.js.map